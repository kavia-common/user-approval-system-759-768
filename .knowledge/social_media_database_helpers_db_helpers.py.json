{"is_source_file": true, "format": "Python", "description": "This file provides helper functions for database interactions in a social media analytics context, including connection management, user retrieval, follower listing, post engagement listing, and analytics data upserting.", "external_files": ["os", "sqlite3", "typing"], "external_methods": ["os.path.abspath", "os.getenv", "sqlite3.connect", "conn.execute", "conn.row_factory", "cur.fetchone", "cur.fetchall", "conn.commit"], "published": ["get_connection", "get_user_by_username", "list_user_followers", "list_posts_with_engagement", "upsert_daily_analytics"], "classes": [], "methods": [{"name": "str _db_path()", "description": "Resolves the path to the SQLite database file based on environment variable or default.", "scope": "", "scopeKind": ""}, {"name": "sqlite3.Connection get_connection()", "description": "Creates and returns a new SQLite Connection with foreign key support and row factory set.", "scope": "", "scopeKind": ""}, {"name": "Optional[sqlite3.Row] get_user_by_username(username: str)", "description": "Fetches a user record by username from the 'users' table.", "scope": "", "scopeKind": ""}, {"name": "List[sqlite3.Row] list_user_followers(user_id: int)", "description": "Lists all followers of a specific user by joining 'followers' and 'users' tables.", "scope": "", "scopeKind": ""}, {"name": "List[sqlite3.Row] list_posts_with_engagement(user_id: Optional[int] = None, limit: int = 50)", "description": "Retrieves posts along with engagement metrics, optionally filtered by user_id.", "scope": "", "scopeKind": ""}, {"name": "None upsert_daily_analytics(user_id: Optional[int], post_id: Optional[int], date: str, **metrics: int)", "description": "Inserts or updates daily analytics metrics for a specific user and post for a given date.", "scope": "", "scopeKind": ""}], "calls": ["os.path.abspath", "os.getenv", "sqlite3.connect", "conn.execute", "conn.row_factory", "cur.fetchone", "cur.fetchall", "conn.commit"], "search-terms": ["db_helpers", "get_connection", "list_posts_with_engagement", "upsert_daily_analytics", "followers", "analytics_daily"], "state": 2, "file_id": 14, "knowledge_revision": 36, "git_revision": "ae1b0e5775ae92f73e5297c99f9c843b0325418f", "ctags": [{"_type": "tag", "name": "_db_path", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-759-768/social_media_database/helpers/db_helpers.py", "pattern": "/^def _db_path() -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_connection", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-759-768/social_media_database/helpers/db_helpers.py", "pattern": "/^def get_connection() -> sqlite3.Connection:$/", "language": "Python", "typeref": "typename:sqlite3.Connection", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_user_by_username", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-759-768/social_media_database/helpers/db_helpers.py", "pattern": "/^def get_user_by_username(username: str) -> Optional[sqlite3.Row]:$/", "language": "Python", "typeref": "typename:Optional[sqlite3.Row]", "kind": "function", "signature": "(username: str)"}, {"_type": "tag", "name": "list_posts_with_engagement", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-759-768/social_media_database/helpers/db_helpers.py", "pattern": "/^def list_posts_with_engagement(user_id: Optional[int] = None, limit: int = 50) -> List[sqlite3.R/", "language": "Python", "typeref": "typename:List[sqlite3.Row]", "kind": "function", "signature": "(user_id: Optional[int] = None, limit: int = 50)"}, {"_type": "tag", "name": "list_user_followers", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-759-768/social_media_database/helpers/db_helpers.py", "pattern": "/^def list_user_followers(user_id: int) -> List[sqlite3.Row]:$/", "language": "Python", "typeref": "typename:List[sqlite3.Row]", "kind": "function", "signature": "(user_id: int)"}, {"_type": "tag", "name": "upsert_daily_analytics", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-759-768/social_media_database/helpers/db_helpers.py", "pattern": "/^def upsert_daily_analytics(user_id: Optional[int], post_id: Optional[int], date: str, **metrics:/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(user_id: Optional[int], post_id: Optional[int], date: str, **metrics: int)"}], "hash": "7fff3bab1825c49ce2260e7d0ad78f12", "format-version": 4, "code-base-name": "social_media_database", "filename": "social_media_database/helpers/db_helpers.py", "revision_history": [{"36": "ae1b0e5775ae92f73e5297c99f9c843b0325418f"}]}